diff -urpN a/cmd-pipe-pane.c b/cmd-pipe-pane.c
--- a/cmd-pipe-pane.c	2018-01-21 11:23:59.000000000 -0500
+++ b/cmd-pipe-pane.c	2023-02-08 10:53:49.494664404 -0500
@@ -165,6 +165,8 @@ cmd_pipe_pane_exec(struct cmd *self, str
 		    cmd_pipe_pane_write_callback,
 		    cmd_pipe_pane_error_callback,
 		    wp);
+		if (wp->pipe_event == NULL)
+			fatalx("out of memory");
 		if (out)
 			bufferevent_enable(wp->pipe_event, EV_WRITE);
 		if (in)
diff -urpN a/job.c b/job.c
--- a/job.c	2018-03-20 03:28:28.000000000 -0400
+++ b/job.c	2023-02-08 10:52:51.502693393 -0500
@@ -128,6 +128,8 @@ job_run(const char *cmd, struct session
 
 	job->event = bufferevent_new(job->fd, job_read_callback,
 	    job_write_callback, job_error_callback, job);
+	if (job->event == NULL)
+		fatalx("out of memory");
 	bufferevent_enable(job->event, EV_READ|EV_WRITE);
 
 	log_debug("run job %p: %s, pid %ld", job, job->cmd, (long) job->pid);
diff -urpN a/window.c b/window.c
--- a/window.c	2018-03-21 04:13:05.000000000 -0400
+++ b/window.c	2023-02-08 10:52:19.990708833 -0500
@@ -1017,6 +1017,8 @@ window_pane_spawn(struct window_pane *wp
 
 	wp->event = bufferevent_new(wp->fd, window_pane_read_callback, NULL,
 	    window_pane_error_callback, wp);
+	if (wp->event == NULL)
+		fatalx("out of memory");
 
 	bufferevent_setwatermark(wp->event, EV_READ, 0, READ_SIZE);
 	bufferevent_enable(wp->event, EV_READ|EV_WRITE);
